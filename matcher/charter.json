{
    "name": "test invoices",
    "preview": false,
    "base_currency": "EUR",
    "version": 1637208553000,
    "instructions": [
        { "sequence": 1, "instruction": "SOURCE_DATA", "filename": "invoices" },
        { "sequence": 2, "instruction": "SOURCE_DATA", "filename": "payments" },
        { "sequence": 3, "instruction": "SOURCE_DATA", "filename": "receipts" },
        { "sequence": 4, "instruction": "PROJECT_COLUMN", "name": "PAYMENT_AMOUNT_BASE", "lua": "payments.Amount * payments.FXRate" },
        { "sequence": 5, "instruction": "PROJECT_COLUMN", "name": "RECEIPT_AMOUNT_BASE", "lua": "receipts.Amount * receipts.FXRate" },
        { "sequence": 6, "instruction": "PROJECT_COLUMN", "name": "TOTAL_AMOUNT_BASE", "lua": "invoices.TotalAmount * invoices.FXRate" },
        { "sequence": 7, "instruction": "MERGE_COLUMNS", "name": "AMOUNT_BASE", "source": ["PAYMENT_AMOUNT_BASE", "RECEIPT_AMOUNT_BASE", "TOTAL_AMOUNT_BASE"] },
        { "sequence": 8, "instruction": "MERGE_COLUMNS", "name": "SETTLEMENT_DATE", "source": ["invoices.SettlementDate", "payments.PaymentDate", "receiptes.ReceiptDate"] },
        { "sequence": 9, "instruction": "GROUP_BY", "columns": ["SETTLEMENT_DATE"] },
        { "sequence": 10, "instruction": "MATCH_GROUPS", "constraints": [
            { "constraint": "NETS_TO_ZERO", "column": "AMOUNT_BASE", "lhs": "filename = 'payments'", "rhs": "filename = 'invoices'" },
            { "constraint": "NETS_TO_ZERO", "column": "AMOUNT_BASE", "lhs": "filename = 'receipts'", "rhs": "filename = 'invoices'" }
        ] }
    ]
}